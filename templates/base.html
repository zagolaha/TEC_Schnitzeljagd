{# templates/base.html #}
<!DOCTYPE html>
<html lang="de">

<head>
	<meta charset="UTF-8">
	<title>TEC Schnitzeljagd</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://cdn.tailwindcss.com"></script>
	<link href="/static/output.css" rel="stylesheet">
	<script>
		if (typeof localStorage.getItem("timer_start") === 'undefined' || localStorage.getItem("timer_start") == null) {
			localStorage.setItem("timer_start", "0");
        	localStorage.setItem("sec", "00");
        	localStorage.setItem("min", "00");
		}
	</script>
</head>

<body style="overflow-x: hidden;">
	{% block content %}{% endblock %}
	<script>
		window.onload = function () {
			if (localStorage.getItem("timer_start") === "1") {
				var min = localStorage.getItem("min");
				var sec = localStorage.getItem("sec");
				var interval = setInterval(function () {
					
					// check time
					if (sec == localStorage.getItem("max_sec") && min ==  localStorage.getItem("max_min")) {
						clearInterval(interval);
						localStorage.setItem("timer_start", "0");
						window.location.href = "{{url_for('end')}}";
					}
					// refresh value in storage
					localStorage.setItem("min", min);
					localStorage.setItem("sec", sec);

					var time = min + ":" + sec;
					var display = document.getElementById("time");
					if (display !== null) {
						document.getElementById("time").innerHTML = time;
					}
					if (sec == 59) {
							min++;
							sec = "00";
							if (min < 10) {
								min = "0" + min;
							}
					}
					else {
						sec++;
						if (sec < 10) {
							sec = "0" + sec;
						}
					}
				}, 1000);
			}
		}
	</script>
</body>

</html>